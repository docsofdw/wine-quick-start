---
interface Props {
  prompt: string;
  aspectRatio?: '16:9' | '4:3' | '1:1' | '3:2' | '21:9';
  alt: string;
  class?: string;
}

const { prompt, aspectRatio = '16:9', alt, class: className } = Astro.props;

const aspectClasses: Record<string, string> = {
  '16:9': 'aspect-video',
  '4:3': 'aspect-[4/3]',
  '1:1': 'aspect-square',
  '3:2': 'aspect-[3/2]',
  '21:9': 'aspect-[21/9]'
};
---

<div
  class:list={[
    'relative bg-gradient-to-br from-wine-100 via-wine-50 to-gray-100 rounded-xl overflow-hidden',
    aspectClasses[aspectRatio],
    className
  ]}
  role="img"
  aria-label={alt}
>
  <!-- Decorative wine-themed pattern -->
  <div class="absolute inset-0 opacity-10">
    <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice">
      <defs>
        <pattern id="wine-pattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
          <circle cx="10" cy="10" r="1.5" fill="currentColor" class="text-wine-600" />
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#wine-pattern)" />
    </svg>
  </div>

  <!-- Content overlay -->
  <div class="absolute inset-0 flex flex-col items-center justify-center p-4 sm:p-6 text-center">
    <!-- Image icon -->
    <div class="w-12 h-12 sm:w-16 sm:h-16 mb-3 sm:mb-4 rounded-full bg-wine-200/50 flex items-center justify-center">
      <svg class="w-6 h-6 sm:w-8 sm:h-8 text-wine-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
    </div>

    <!-- Prompt display box -->
    <div class="bg-white/90 backdrop-blur-sm px-3 py-2 sm:px-4 sm:py-3 rounded-lg max-w-md shadow-sm border border-wine-200">
      <p class="text-[10px] sm:text-xs text-wine-800 font-semibold uppercase tracking-wide mb-1">
        Midjourney Prompt
      </p>
      <p class="text-[11px] sm:text-xs text-wine-700 font-mono leading-relaxed">
        {prompt}
      </p>
    </div>
  </div>
</div>
